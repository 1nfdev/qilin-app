#!/usr/bin/env node

var fs      = require( "fs" );
var path    = require( "path" );

var browser = require( "browserify" )( {
    entries : [ path.resolve( __dirname, "../client/index.js" ) ],
    paths   : [ path.resolve( __dirname, "../node_modules" ) ]
} );

browser.transform( require( "babelify" ) );
browser.transform( require( "uglifyify" ), { global : true } );

var bundle = browser.bundle();

bundle
    .on( "error", error => console.log( error ) )
    .on( "end", () => console.log( "Done" ) )
    .pipe( fs.createWriteStream( path.resolve( __dirname, "../client/compiled.js" ) ) );
